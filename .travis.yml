# Based on https://github.com/moteus/lua-travis-example
language: c
branches:
  only:
    - moon
env:
  global:
    - LUAROCKS=2.3.0
    - LUA=lua5.1
before_install:
  - source .travis/setenv_lua.sh
install:
  - luarocks install moonscript
script:
  - cd build
  - rm -r *
  - moonc -l ../src
  - moonc -t . ../src/*
notifications:
  irc:
    channels:
      - "irc.esper.net#cc.ru"
    use_notice: true
    template:
      - "New build on %{repository_slug}!"
      - "%{repository_name}#%{build_number} [%{branch}] %{message}"
      - "[%{commit}] %{author}: %{commit_message}"
      - "Changes: %{compare_url}"
      - "Build details: %{build_url}"
